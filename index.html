<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>OpenStack Cloud Maker - Cluster Configuration & Deployment</title>
<link rel="stylesheet" href="css/jquery-ui.css">
<link rel="stylesheet" href="css/tab_style.css">
<link rel="stylesheet" href="css/bootstrap.css">
<link rel="stylesheet" href="css/bootstrap-editable.css">

<script src="js/jquery-1.js" type="text/javascript"></script>
<script src="js/jquery-ui.js" type="text/javascript"></script>

<script src="/_utils/script/json2.js"></script>
<script src="/_utils/script/sha1.js"></script>
<script src="/_utils/script/jquery.dialog.js?0.11.0"></script>	
<script src="js/common.js"></script>	
     
  <script>
  $(function() {
    $( "#tabs" ).tabs().addClass( "ui-tabs-vertical ui-helper-clearfix" );
    $( "#tabs li" ).removeClass( "ui-corner-top" ).addClass( "ui-corner-left" );
  });
  </script>
  

  
  
  <script>
  

  $(document).ready(function() {
  
  $(".nexttab").click(function() {
    var selected = $("#tabs").tabs("option", "selected");
    $("#tabs").tabs("option", "selected", selected + 1);

});


  
  
  $.getScript("/_utils/script/jquery.js?1.4.2", function(){
	$.getScript("/_utils/script/jquery.couch.js?0.11.0", function(){
 
		chooseNodeMappingOptions();		
 
		$.couch.db("devops").view("cluster-query/all", {
			success: function(data) {
			var nodes = data.rows;

			for(i=0;i<nodes.length;i++)
			{
				var jsonObject = nodes[i];
				var jsonValue = jsonObject.value;			
				$('#existingNodeSelect').append('<option value='+jsonValue._id+'>'+jsonValue.name+'</option>');
			}
		},
		error: function(status) {
			alert(status);
		},
		reduce: false
	});
	
	
 
	 loadAllNodes();
	 


$.couch.db("devops").view("cluster-query/all", {
    success: function(data) {
	
		var nodes = data.rows;
		for(i=0;i<nodes.length;i++)
		{
			var jsonObject = nodes[i];
			var jsonValue = jsonObject.value;
			
			//alert(jsonValue._id);
			//$("#baseTableCluster > tbody").append("<tr align='center'><td>"+(jsonObject.key)+"</td><td>"+(jsonValue.description)+"</td><td>"+(jsonValue.ssh_key)+"</td><td>"+(jsonValue.chef_env_name)+"</td><td>"+(jsonValue.chef_path)+"</td><td>"+(jsonValue.chef_server_ip)+"</td><td>"+(jsonValue.user_name)+"</td><td><a id=\"aaaa\" href=\"javascript:deleteCluster('"+(jsonValue._id)+"','"+(jsonValue._rev)+"');\">Delete</a></td></tr>");
			
			$("#baseTableCluster > tbody").append("<tr align='center'><td>"+(jsonObject.key)+"</td><td>"+(jsonValue.description)+"</td><td>"+(jsonValue.user_name)+"</td><td><a id=\"aaaa\" href=\"javascript:deleteCluster('"+(jsonValue._id)+"','"+(jsonValue._rev)+"');\">Delete</a></td></tr>");
		}	  
    },
    error: function(status) {
        alert(status);
    },
    reduce: false
});
	
	});
});

  
	$('#tabs').tabs({ active: 0 });
	
	$('.newCluster').hide();
	$('.existingNode').hide();
	$('#loadBalancer').hide();
	$('#deploymentSelection').show();
	
	var rows = $('#HAConfigurataion div');
	//alert(rows[0].type);

	rows.each(function() {

		if(this.id)
		{
			$('#'+(this.id)).hide();	
		}
	
	});
	
	$('#HAConfigurataion input:checkbox').change(function () {

		if(this.checked)
		{
			$('#row'+this.name).show();
			$('#'+this.name+"text").focus();
		}
		else
		{
			$('#row'+this.name).hide();	
		}
		
	});
	 $('#tabs-3 input:radio').change(function () {
			var selectedVal = $("#tabs-3 input:radio:checked").val();

			if(selectedVal=="New")
			{
				$("#selectOptionLabel").text("Create New Node");
				$('.newCluster').show();
				$('.existingNode').hide();
				
			}
			else
			{
				$("#selectOptionLabel").text("Please Choose Node");
				$('.newCluster').hide();
				$('.existingNode').show();
				loadClusterConfiguration();
			}	
		
	 });
	 
	 $('#existingNodeSelect').change(function () {
			loadClusterConfiguration();
	 });
	 
	 
	 $('#networktype').change(function () {
		chooseNodeMappingOptions();
	  });

	 $('#deploymentSelectionSelect').change(function () {		
			chooseNodeMappingOptions();
	  });
	  
	  
	  function chooseNodeMappingOptions(){
	  
		// Check Network Type
		
		var network_type = $('#networktype').val();
		
		if(network_type=="quantum")
		{
			$('.Quantum').show();				
		}
		else
		{
			$('.Quantum').hide();	
		}		
		
		// Check Whether HA enabled or not
		
		var isHAEnabled = $('#haEnabledCheck:checked').val()?true:false;
		
		if(isHAEnabled)
		{
			$('.loadBalancer').show();	
			$('#deploymentSelection').hide();	
			showNodeMappingTable("HA","all-"+network_type);			
		}
		else
		{
			$('.loadBalancer').hide();
			$('#deploymentSelection').show();	
			$("#NodeMappingTable").empty();
			
			var deploymentOption = $('#deploymentSelectionSelect').val();
			
			if(deploymentOption!="all")
			{
				showNodeMappingTable("NONHA",deploymentOption+"-"+network_type);
			}
			else
			{
				showNodeMappingTable("NONHA",deploymentOption);
			}			
		}		
		
	  }
	  
	  
	  
	  function showNodeMappingTable(hanonha,options) {
	  
			
			$.couch.db("devops").view("chef-roles-query/all", {
			success: function(data) {

				var nodes = data.rows;
				var jsonObject = nodes[0];
				var jsonValue = jsonObject.value;
				var hanonhaObject = jsonValue[hanonha];
				var nonhaObject = hanonhaObject[options];	
				var all_keys = Object.keys(nonhaObject);
				
				var tableStr="";
				tableStr = tableStr.concat("<TH align=\"center\">");
				for (var j in all_keys) {
					var value = nonhaObject[all_keys[j]];
					tableStr = tableStr.concat("<TD align=\"center\" width=\"10%\">");
					tableStr = tableStr.concat(value);
					tableStr = tableStr.concat("</TD>");
				}
				tableStr = tableStr.concat("</TH>");
					
				//alert(tableStr);
				$("#NodeMappingTable").empty();
				$("#NodeMappingTable").append(tableStr);
				var tableStr="";
				
				// fetch nodes
				$.couch.db("devops").view("node-query/all", {
					success: function(data) {
					
						var nodes = data.rows;

						for(i=0;i<nodes.length;i++)
						{
							var jsonObject = nodes[i];						
							tableStr = tableStr.concat("<TR id=\""+(jsonObject.key)+"\" align=\"center\">");
							tableStr = tableStr.concat("<TD align=\"center\" width=\"10%\">");
							tableStr = tableStr.concat(jsonObject.key);
							tableStr = tableStr.concat("</TD>");	

							for (var j in all_keys) {
								var value = nonhaObject[all_keys[j]];
								tableStr = tableStr.concat("<TD align=\"center\" width=\"20%\">");
								tableStr = tableStr.concat("<input name=\""+(jsonObject.key)+(value)+"\" value=\""+(value)+"\" type=\"checkbox\">");
								tableStr = tableStr.concat("</TD>");
							}
							tableStr = tableStr.concat("</TR>");			
						}	
						
						$("#NodeMappingTable").append(tableStr);						
					},
					error: function(status) {
						alert(status);
					},
					reduce: false
				});				
				
				//alert(tableStr);	
								
				
			},
			error: function(status) {
				alert(status);
			},
			reduce: false
		});
								  
	  
	  }
	 
	 $(".nextButton").click(function(e){
		
		var selected = $("#tabs").tabs("option", "selected");
		$("#tabs").tabs("option", "selected", selected + 1);
	 
	 });
	 
	 $("#haEnabledCheck").click(function(e){
			chooseNodeMappingOptions();
	 });
	 
	 $("#startDeployment2").click(function(e){
		startDeployment();
		//showDeploymentLogs();
	 });
	 
	 $("#startDeployment1").click(function(e){
		

		
	  });
	  
	  
		
	 $("#startDeployment").click(function(e){
					
			// Save Info Tab
			var jsonPayload = {};
			jsonPayload['type']='cluster';
			
			jsonPayload['ssh_key']='/root/.ssh/id_rsa';
			jsonPayload['user_name']='root';
			jsonPayload['chef_path']='/root/openstackchef/openstack-installation';
			jsonPayload['chef_env_name']=$("#name").val();
			jsonPayload['chef_server_ip']='172.16.0.8';
			
			var rows = $('#newCluster input:text');
			for(i=0;i<rows.length;i++)
			{
				jsonPayload[rows[i].name]=rows[i].value;
			}
			

			$.couch.db("devops").saveDoc(jsonPayload, {
				success: function(data) {
					if(data.ok)
					{
						alert("Cluster Info Saved");
						//location.reload(true);
						
						var docID = data.id;
						saveBasicConfiguration(docID);
					}
				},
				error: function(status) {
					alert(status);
				}
			});
			
			
			
			
	 });

	 
  });	
	
	function startDeployment()
	  {
		alert("Starting Deployment - Calling Python Script");
		  $.ajax({type:'GET', 
				  url: 'http://10.44.66.126:5984/devops/_generate_nodelist',     		
				  success: function(response) { 
				  //alert(response);
				  if(response.invocation =="success")
				  {
					alert("Generate NodeList Script successfully invoked. Displaying Logs..."); 
					showDeploymentLogs();
				  }
				  else
				  {
					alert("Generate Nodelist invocation failed");
				  }
			 },
			 error: function(jqXHR, textStatus, errorThrown) {
		  		 alert("Some Error has occurred. Trying Again...");
				startDeployment();
			 }   			 
			 }); 
	  }

	function showDeploymentLogs()
	  {

	
		setInterval(function() {
		  
		  $.ajax({type:'GET', 
				  url: 'http://10.44.66.126:5984/devops/_show_logs',     		
				  success: function(response) { 
				  //alert(response);
				  if(response.result)
				  {	
					$('#result').append("\n"+response.result);
					tailScroll();
				  }
			 },
			 error: function(jqXHR, textStatus, errorThrown) {
		  		// alert("Some Error has occurred.");
			 }   			 
			 }); 

			
		}, 1000 );
	  }
	  
    
	  function tailScroll() {
		  var height = $("#result").get(0).scrollHeight;
		  $("#result").animate({
			  scrollTop: height
		  }, 500);
	  }
	  
	
	function loadClusterConfiguration()
	{
		//alert("Load Values");
		
		var currentCluster = $("#existingNodeSelect").val();
		
		//alert(currentCluster);	
		$.couch.db("devops").view("data/by_clusterid", { key: currentCluster, success: function(data) {

					var nodes = data.rows;
	
					//alert(nodes.length);
					for(nodeI=0;nodeI<nodes.length;nodeI++)
					{
						var jsonObject = nodes[nodeI];
						//alert(jsonObject);
						var jsonValue = jsonObject.value;
						
						//alert(jsonValue.type);
						if(jsonValue.type == "cluster-basic-setting")
						{
							var rows = $('#basicConfiguration select');
							for(i=0;i<rows.length;i++)
							{
								$('#'+(rows[i].name)).val(jsonValue[rows[i].name]);
								
								if(jsonValue[rows[i].name] =="quantum")
								{
									$('.Quantum').show();		
									var quantumObj = jsonValue['quantum'];
									
									var input_rows = $('#Quantum input:text');
									for(j=0;j<input_rows.length;j++)
									{
										$('#'+(input_rows[j].name)).val(quantumObj[input_rows[j].name]);
									}
									
									//alert(quantumObj['enable_tunneling']);
									if(quantumObj['enable_tunneling'] == 'true')
									{
										$('input:radio[name=enable_tunneling]:nth(0)').attr('checked',true);
									}
									else
									{
										$('input:radio[name=enable_tunneling]:nth(1)').attr('checked',true);
									}
									
								}
								else
								{
									$('.Quantum').hide();	
								}															
							}
						
							var networksObj = jsonValue['networks'];
							
							var rows = $('#OSOPS input:text');

							for(k=0;k<rows.length;k++)
							{
								$('#'+(rows[k].name)).val(networksObj[rows[k].name]);
							}								
							
							var glanceOjb = jsonValue['glance'];
							
							if(glanceOjb['image_upload'] == 'true')
							{
								$('input:radio[name=image_upload]:nth(0)').attr('checked',true);
							}
							else
							{
								$('input:radio[name=image_upload]:nth(1)').attr('checked',true);
							}							
							
						}
						else if(jsonValue.type == "cluster-ha-setting")
						{
							//alert("ha");
							$('#haEnabledCheck').attr('checked', 'checked');
							$('.loadBalancer').show();	
							
							//alert(jsonValue['hatype']);
							
							$('#hatype').val(jsonValue['hatype']);
							
							var haObj = jsonValue['ha'];
							var vipsObj = jsonValue['vips'];

							var all_keys = Object.keys(haObj);
													
							for (var j in all_keys) {
								var value = haObj[all_keys[j]];
								//alert(value);
								
								if(value == 'true')
								{									
									//alert(all_keys[j].indexOf("_ha"));
									
									var objName = 	all_keys[j].substr(0,all_keys[j].indexOf("_ha"));
									//alert(objName);									
									$('#'+objName+'').attr('checked', 'checked');
									$('#row'+objName).show();

									$('#'+(objName)+'text').val(vipsObj[objName+"_vip"]);
									
									if(objName=="db")
									{
										var dbObj = jsonValue['db'];
										
										$('#dbtext1').val(dbObj['db2_primary_host']);			
										$('#dbtext2').val(dbObj['db2_standby_host']);			
																				
									}
									else if(objName=="mq")
									{
									
										var mqObj = jsonValue['mq'];
										var qpid_nodes = mqObj['qpid_nodes'];
										//alert(qpid_nodes);
										
										//alert(qpid_nodes.indexOf(","));
										
										$('#mqtext1').val(qpid_nodes.substr(0,qpid_nodes.indexOf(",")));			
										$('#mqtext2').val(qpid_nodes.substr(qpid_nodes.indexOf(",")+1));										
									
									}
								}
								
							}
						
						}
					}

		
					} } )

	}
		
	
    function saveBasicConfiguration(id) {
 
		//alert(id);
	
		var jsonPayload = {};
		jsonPayload['type']='cluster-basic-setting';
		jsonPayload['clusterid']=id;
		jsonPayload['cluster_name']=$("#name").val();


		var rows = $('#basicConfiguration select');
		for(i=0;i<rows .length;i++)
		{
			jsonPayload[rows[i].name]=rows[i].value;
		}
				
		
		if($("#networktype").val() == 'quantum')
		{
		
			var quantumPayload = {};			
			var rows = $('#Quantum input:text');

			for(i=0;i<rows .length;i++)
			{
				quantumPayload[rows[i].name]=rows[i].value;
			}
	
			var rows = $('#Quantum input:radio');

			for(i=0;i<rows .length;i++)
			{
				quantumPayload[rows[i].name]=rows[i].value;
			}
			
			jsonPayload['quantum']=quantumPayload;
		}

		
		var networksPayload = {};
		
		var rows = $('#OSOPS input:text');

		for(i=0;i<rows .length;i++)
		{
			networksPayload[rows[i].name]=rows[i].value;
		}
		
		networksPayload['dns1']="172.16.0.1";
		networksPayload['bridge']="br-vmnet";
		networksPayload['bridgedev']="eth1";
		networksPayload['vmnet']="192.168.1.0/24";
		networksPayload['vmnetnum']="1";
		networksPayload['vmnetsize']="256";
		networksPayload['firewall_driver']="nova.virt.firewall.NoopFirewallDriver";
		networksPayload['network_manager']="nova.network.manager.FlatDHCPManager";
		
		var vlanPayload = {};
		vlanPayload['vlan_start']="520";
		vlanPayload['vlan_end']="550";
		vlanPayload['vlan_interface']="vlan1";
		networksPayload['vlan']=vlanPayload;
		
		jsonPayload['networks']=networksPayload;
		
				
		var glancePayload = {};
		var image_upload = $('input:radio[name=image_upload]:checked').val();
		glancePayload['image_upload']=image_upload;		
		jsonPayload['glance']=glancePayload;

		var gpfsPayload = {};
		gpfsPayload['gpfs_cluster_name']="gpfs_01";
		jsonPayload['gpfs']=gpfsPayload;
		
		jsonPayload['enable_iptables']='true';
		jsonPayload['packageserver']="172.16.0.8";
		jsonPayload['imageserver']="172.16.0.8";

		
			$.couch.db("devops").saveDoc(jsonPayload, {
			success: function(data) {
				if(data.ok)
				{
					alert("Cluster Basic Configuration Saved");
					saveHAConfiguration(id);
				}
			},
			error: function(status) {
				alert(status);
			}
		});
		
    }

	
	  function saveHAConfiguration(id) {
 
		//alert(id);
	
		var jsonPayload = {};
		jsonPayload['type']='cluster-ha-setting';
		jsonPayload['clusterid']=id;
		jsonPayload['cluster_name']=$("#name").val();

		
		var haEnabledCheck = $('input:checkbox[name=haEnabledCheck]:checked').val();
		
		if(haEnabledCheck)
		{
			//alert(haEnabledCheck);
			
			var rows = $('#loadBalancer select');
			for(i=0;i<rows .length;i++)
			{
				jsonPayload[rows[i].name]=rows[i].value;
			}		

			var rows = $('#HAConfigurataion input:checkbox');
			//alert(rows.length);
			
			var haPayload = {};
			var vipsPayload = {};
			
			for(i=0;i<rows.length;i++)
			{
				var isEnabledCheck = $('input:checkbox[name='+(rows[i].name)+']:checked').val();
				if(isEnabledCheck)
				{
					haPayload[rows[i].name+"_ha"]=isEnabledCheck;
					vipsPayload[rows[i].name+"_vip"]=$("#"+rows[i].name+"text").val();
					
					if(rows[i].name=='db')
					{
						var dbPayload = {};
						dbPayload['db2_primary_host']=$("#dbtext1").val();
						dbPayload['db2_standby_host']=$("#dbtext2").val();
						
						jsonPayload['db']=dbPayload;
					}
					
					if(rows[i].name=='mq')
					{
						var mqPayload = {};
						mqPayload['qpid_nodes']=$("#mqtext1").val()+","+$("#mqtext2").val();
						
						jsonPayload['mq']=mqPayload;
					}					
				}
				else
				{
					haPayload[rows[i].name+"_ha"]='false';
					vipsPayload[rows[i].name+"_vip"]="0.0.0.0";
				}
			}				
						
			jsonPayload['ha']=haPayload;
			jsonPayload['vips']=vipsPayload;
			
			$.couch.db("devops").saveDoc(jsonPayload, {
				success: function(data) {
					if(data.ok)
					{
						alert("Cluster HA Configuration Saved");
						saveNodeRoleMapping(id);
					}
				},
				error: function(status) {
					alert(status);
				}
			});
		}
		else
		{
			saveNodeRoleMapping(id);
		}
    }
  
  function saveNodeRoleMapping(id) {
 
		var rows = $('#NodeMappingTable tr');

		//alert(rows.length);
		
		rows.each(function() {

		var nodeName = this.id;
		var rows1 = $("#"+(this.id)+" input:checkbox");
			//alert(rows1.length);
			
		var jsonPayload = {};
		jsonPayload['type']='node-role-mapping';
		jsonPayload['clusterid']=id;
		jsonPayload['cluster_name']=$("#name").val();			
		jsonPayload['hostname']=nodeName;
		
		var rolePayload = new Array();
		
		for(i=0;i<rows1.length;i++)
		{
			var isEnabledCheck = $('input:checkbox[name='+(rows1[i].name)+']:checked').val();
			if(isEnabledCheck)
			{
				rolePayload.push(rows1[i].value);
			}				
		}			
		//alert(rolePayload);
		jsonPayload['role']=rolePayload;	
			
		$.couch.db("devops").saveDoc(jsonPayload, {
			success: function(data) {
				if(data.ok)
				{
					alert("Node-Role Mapping is saved for : "+ nodeName);					
				}
			},
			error: function(status) {
				alert(status);
			}
		});		
		
		});
		
		startDeployment();
  }
  
  </script>

  <script>


function deleteNode(id,revID) {
 
var jsonPayload = {};
jsonPayload['_id']=id;
jsonPayload['_rev']=revID;
 
$.couch.db("devops").removeDoc(jsonPayload, {
     success: function(data) {
         if(data.ok)
		{
			alert("Node Deleted");
			location.reload(true);
		}
    },
    error: function(status) {
        alert(status);
    }
});

    }

function deleteCluster(id,revID) {
 
var jsonPayload = {};
jsonPayload['_id']=id;
jsonPayload['_rev']=revID;
 
$.couch.db("devops").removeDoc(jsonPayload, {
     success: function(data) {
         if(data.ok)
		{
			alert("Cluster Deleted");
			location.reload(true);
		}
    },
    error: function(status) {
        alert(status);
    }
});

    }

	function createNode()
	{
		
	
	
	$("#baseTable > tbody").append("<tr align='center'><td><input name=\"name\" id=\"name\" type=\"text\"></td><td><input name=\"install_nic\" id=\"install_nic\"  type=\"text\"></td><td><input name=\"install_ip\" id=\"install_ip\" type=\"text\"></td><td><input name=\"install_gw\" id=\"install_gw\" type=\"text\"></td><td><input name=\"install_nmask\" id=\"install_nmask\" type=\"text\"></td><td><input id=\"addNode\" value=\"Add\" type=\"button\"></td></tr>");
	
		$('#name').focus();
		
			$("#addNode").click(function(e){
			
			//alert("here");
			var jsonPayload = {};
			jsonPayload['type']='node';
			
			var rows = $('#create_node input:text');
			for(i=0;i<rows .length;i++)
			{
				jsonPayload[rows[i].name]=rows[i].value;
			}
			$.couch.db("devops").saveDoc(jsonPayload, {
				success: function(data) {
					if(data.ok)
					{
						alert("Node Saved");
						location.reload(true);
						// loadAllNodes();
					}
				},
				error: function(status) {
					alert(status);
				}
			});
		});			
	}
	
	function loadAllNodes()
	{
		
		
		$.couch.db("devops").view("node-query/all", {

			success: function(data) {
				
				
				//$("#baseTable").empty();
				var nodes = data.rows;
				for(i=0;i<nodes.length;i++)
				{
					var jsonObject = nodes[i];
					var jsonValue = jsonObject.value;
					
					//alert(jsonValue._id);
					$("#baseTable > tbody").append("<tr align='center'><td>"+(jsonObject.key)+"</td><td>"+(jsonValue.install_nic)+"</td><td>"+(jsonValue.install_ip)+"</td><td>"+(jsonValue.install_gw)+"</td><td>"+(jsonValue.install_nmask)+"</td><td><a id=\"aaaa\" href=\"javascript:deleteNode('"+(jsonValue._id)+"','"+(jsonValue._rev)+"');\">Delete</a></td></tr>");
				}
			   
			},
			error: function(status) {
				alert(status);
			},
			reduce: false
		});	
	}

		
    </script> 
  
  
</head>

<body>
	<div
		class="ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-vertical ui-helper-clearfix"
		id="tabs">
		<ul 
			class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
			<li><a class="ui-tabs-anchor" href="#tabs-1">Node Registration</a></li>
			<li><a class="ui-tabs-anchor" href="#tabs-2">Cluster List</a></li>
			<li><a class="ui-tabs-anchor" href="#tabs-3">Info</a></li>
			<li><a class="ui-tabs-anchor" href="#tabs-4">Basic Configuration</a></li>
			<li><a class="ui-tabs-anchor" href="#tabs-5">HA Configuration</a></li>
			<li><a class="ui-tabs-anchor" href="#tabs-6">Node Role Mapping</a></li>
			<li><a class="ui-tabs-anchor" href="#tabs-7">Deployment</a></li>
		</ul>

		<div class="ui-tabs-panel ui-widget-content ui-corner-bottom "  align="center" id="tabs-1">
			
			<h2>Node Registration</h2>
				<table border="0" width="70%">
						<tr id="baseTableHeader">
							<th scope="col" width="50%"><a href="javascript:createNode()">Create New Node</a></th>
						</tr>					
				</table>			
			
			<p></p>
			<form name="create_node" id="create_node" >
				<table id="baseTable" name="baseTable" border="1" width="70%">
						<tr id="baseTableHeader">
							<th scope="col" width="20%">Node Name</th>
							<th scope="col" width="10%">Install NIC</th>
							<th scope="col" width="20%">Install IP</th>
							<th scope="col" width="20%">Install Gateway</th>
							<th scope="col" width="20%">Net Mask</th>
							<th scope="col" width="5%">Delete</th>
						</tr>					
				</table>
			</form>

		</div>
		<div class="ui-tabs-panel ui-widget-content ui-corner-bottom"   align="center" id="tabs-2">
			
			<h2>Available Cluster List</h2>

			<p></p>
			<form name="form2" id="form2">
				<table id="baseTableCluster" border="1" width="70%">
						<tr id="baseTableHeaderCluster">
							<th scope="col" width="20%">Cluster Name</th>
							<th scope="col" width="40%">Description</th>
						<!--	<th scope="col" width="13%">SSH Key</th>
							<th scope="col" width="13%">Chef Env Name</th>
							<th scope="col" width="13%">Chef Path</th>
							<th scope="col" width="13%">Chef Server IP</th>-->
							<th scope="col" width="20%">Username</th>
							<th scope="col" width="5%">Delete</th>
						</tr>					
				</table>
			</form>			
			
		</div>	
		<div class="ui-tabs-panel ui-widget-content ui-corner-bottom"   id="tabs-3">
			<h2>Info</h2>
			<form name="form1" id="form1">
				<table  border="0" width="50%">
					<tbody>
						<tr>
							<td width="20%"><label> Select Option: </label></td>
							<td><input id="selectOption" name="selectOption" value="New"
								type="radio">&nbsp;Create New
								Cluster&nbsp;&nbsp;&nbsp;&nbsp;<input name="selectOption"
								value="Exiting" type="radio">&nbsp;Select Existing
								Cluster</td>
						</tr>
						<tr>
							<td>&nbsp;</td>
							<td>&nbsp;</td>
						</tr>

						<tr>
							<td width="20%"><label id="selectOptionLabel"></label></td>
							<td>
								<div id="newCluster" class="newCluster">
									<table  summary="Speadsheet" border="0"
										width="100%">
										<tbody>
											<tr>
												<td width="30%"><label> Cluster Name</label></td>
												<td><input name="name" id="name" type="text"></td>
											</tr>
											<tr>
												<td id="subCategory"><label> Cluster
														Description: </label></td>
												<td><input name="description" type="text"></td>
											</tr>

										</tbody>
									</table>
								</div>
								<div id="existingNode" class="existingNode">
									<table  summary="Speadsheet" border="0"
										width="100%">
										<tbody>
											<tr>
												<td><select name="existingNodeSelect"
													id="existingNodeSelect">
												</select></td>
											</tr>
										</tbody>
									</table>
								</div>

							</td>
						</tr>
						<tr>
							<td>&nbsp;</td>
							<td>&nbsp;</td>
						</tr>

						<tr>
							<td><input id="1" class="nextButton" value="NEXT"
								type="button"></td>
							<td align="left">&nbsp; </td>
						</tr>
					</tbody>
				</table>
			</form>
			<p></p>		
		</div>
		<div class="ui-tabs-panel ui-widget-content ui-corner-bottom"   id="tabs-4">
			<h2>Basic Configuration</h2>
			<form name="form2" id="form2">
				<input name="featureCodeGroupID" value="FOD" type="hidden">

				<div id="basicConfiguration">
					<table>
						<tbody>
							<tr>
								<td id="featureCodeCategory"><label> Database Type:
								</label></td>
								<td><select name="dbtype" id="dbtype">
										<option value="mysql">MySQL</option>
										<option value="db2">DB2</option>
								</select></td>
							</tr>
							<tr>
								<td><label> AMQP Type: </label></td>
								<td><select name="mqtype" id="mqtype">
										<option value="qpid">QPID</option>
										<option value="rabbitmq">RabbitMQ</option>
								</select></td>
							</tr>
							<tr>
								<td><label> Network Type: </label></td>
								<td><select name="networktype" id="networktype">
										<option value="quantum">Quantum</option>
										<option value="nova-network">Nova-Network</option>
								</select></td>
							</tr>

						</tbody>
					</table>
				</div>


				<p></p>
				<div id="OSOPS">
					<table summary="Speadsheet" border="1" width="50%">
						<TR>
							<TD width="15%" ROWSPAN=3>OSOPS</TD>
							<TD width="25%">Public Network</TD>
							<TD><input name="pubnet" id="pubnet" type="text"></TD>
						</TR>
						<TR>
							<TD>Nova Network</TD>
							<TD><input name="novanet" id="novanet" type="text"></TD>
						</TR>
						<TR>
							<TD>Management Network</TD>
							<TD><input name="mgmtnet" id="mgmtnet" type="text"></TD>
						</TR>

					</TABLE>
				</div>

				<p></p>
				<table  summary="Speadsheet" border="1" width="50%">
					<TR>
						<TD width="15%">Glance</TD>
						<TD width="25%">Image Upload</TD>
						<TD><input id="image_upload" name="image_upload" value="true"
							type="radio">&nbsp;Yes&nbsp;&nbsp;&nbsp;&nbsp;<input
							name="image_upload" value="false" type="radio">&nbsp;No</TD>
					</TR>


				</TABLE>

				<div id="Quantum" class="Quantum">
					<p></p>
					<table summary="Speadsheet" border="1" width="50%">
						<TR>
							<TD width="15%" ROWSPAN=6>Quantum</TD>
							<TD width="25%">Tenant Network Type</TD>
							<TD><input name="tenant_network_type" id="tenant_network_type" type="text"></TD>
						</TR>
						<TR>
							<TD>Network VLAN Rang</TD>
							<TD><input name="network_vlan_range" id="network_vlan_range" type="text"></TD>
						</TR>
						<TR>
							<TD>Tunnel ID Range</TD>
							<TD><input name="tunnel_id_range" id="tunnel_id_range" type="text"></TD>
						</TR>
						<TR>
							<TD>Enable Tunneling</TD>
							<TD><input id="enableTuneling" name="enable_tunneling"
								value="true" type="radio">&nbsp;Yes&nbsp;&nbsp;&nbsp;&nbsp;<input
								name="enable_tunneling" value="false" type="radio">&nbsp;No</TD>
						</TR>
						<TR>
							<TD>Bridge Mapping NIC</TD>
							<TD><input name="bridge_mapping_nic" id="bridge_mapping_nic" type="text"></TD>
						</TR>
						<TR>
							<TD>Floating IP NIC</TD>
							<TD><input name="floating_if" id="floating_if" type="text"></TD>
						</TR>
					</TABLE>
				</div>

				<table border="0" width="50%">
					<tbody>

						<tr>
							<td>&nbsp;</td>
							<td>&nbsp;</td>
						</tr>
						<tr>
							<td><input class="backButton" value="BACK" type="button"></td>
							<td align="right"><input class="nextButton" id="2"
								value="NEXT" type="button"></td>
						</tr>
					</tbody>
				</table>	
			</form>	
		</div>
		<div class="ui-tabs-panel ui-widget-content ui-corner-bottom"   id="tabs-5">

			
			<h2>HA Configuration</h2>
			<form name="form3" id="form3">

				<div id="haEnabled" class="haEnabled">
					<table border="0" width="50%">
						<tbody>
							<tr>
								<td width="28%"><label> HA Enabled: </label></td>
								<td><input id="haEnabledCheck" name="haEnabledCheck"
									value="Yes" type="checkbox"></td>
							</tr>
						</tbody>
					</table>

					<p></p>

					<div id="loadBalancer" class="loadBalancer">

						<p></p>
						<div id="HAConfigurataion" class="HAConfigurataion">
							<table border="1" width="100%">
								<TH align="center">
								<TD align="center" width="10%">DB</TD>
								<TD align="center" width="10%">MQ</TD>
								<TD align="center" width="10%">KeyStone</TD>
								<TD align="center" width="10%">Glance API</TD>
								<TD align="center" width="10%">Glance Registry</TD>
								<TD align="center" width="10%">Cinder API</TD>
								<TD align="center" width="10%">NOVA API</TD>
								<TD align="center" width="10%">EC2-API</TD>
								<TD align="center" width="10%">Qunatum Server</TD>
								</TH>
								<TR align="center">
									<TD align="center" width="10%">HA Component</TD>
									<TD align="center" width="10%"><input
										name="db" id="db" value="true" type="checkbox"></TD>
									<TD align="center" width="10%"><input
										name="mq" id="mq" value="true" type="checkbox"></TD>
									<TD align="center" width="10%"><input
										name="keystone" id="keystone" value="true" type="checkbox"></TD>
									<TD align="center" width="10%"><input
										name="glance_api" id="glance_api"  value="true" type="checkbox"></TD>
									<TD align="center" width="10%"><input
										name="glance_registry" id="glance_registry"  value="true" type="checkbox"></TD>
									<TD align="center" width="10%"><input
										name="cinder_api" id="cinder_api" value="true" type="checkbox"></TD>
									<TD align="center" width="10%"><input
										name="nova_api" id="nova_api"  value="true" type="checkbox"></TD>
									<TD align="center" width="10%"><input
										name="ec2_api" id="ec2_api"  value="true" type="checkbox"></TD>
									<TD align="center" width="10%"><input
										name="quantum_server" id="quantum_server"  value="true" type="checkbox"></TD>
								</TR>
								<TR align="center">
									<TD align="center" width="10%">Virtual IP</TD>
									<TD align="center" width="10%">
										<div id="rowdb">
											<label id="dbPrimaryHost"> DB2 Primary </label> <input
												id="dbtext1" name="dbtext1"
												type="text" size="12"> <label id="dbSecondaryHost">DB2
												Secondary </label><input id="dbtext2"
												name="dbtext2" type="text" size="12">
											<label id="dbVirtualIPL"> Virtual IP </label><input
												id="dbtext" name="dbtext" type="text" size="12">
										</div>
									</TD>
									<TD align="center" width="10%">
										<div id="rowmq">
											<label id="mqPrimaryHost"> QPID Primary </label><input
												id="mqtext1" name="mqtext1"
												type="text" size="12"><label id="mqSecondaryHost">QPID
												Secondary </label><input id="mqtext2"
												name="mqtext2" type="text" size="12"><label
												id="mqVirtualIPL"> Virtual IP </label><input
												id="mqtext" name="mqtext" type="text" size="12">
										</div>
									</TD>
									<TD align="center" width="10%"><div
											id="rowkeystone">
											<input name="keystonetext" id="keystonetext"
												type="text" size="12">
										</div></TD>
									<TD align="center" width="10%"><div
											id="rowglance_api">
											<input name="glance_apitext" id="glance_apitext"
												type="text" size="12">
										</div></TD>
									<TD align="center" width="10%"><div
											id="rowglance_registry">
											<input name="glance_registrytext" id="glance_registrytext"
												type="text" size="12">
										</div></TD>
									<TD align="center" width="10%"><div
											id="rowcinder_api">
											<input name="cinder_apitext" id="cinder_apitext"
												type="text" size="12">
										</div></TD>
									<TD align="center" width="10%" id><div
											id="rownova_api">
											<input name="nova_apitext" id="nova_apitext"
												type="text" size="12">
										</div></TD>
									<TD align="center" width="10%"><div
											id="rowec2_api">
											<input name="ec2_apitext" id="ec2_apitext"
												type="text" size="12">
										</div></TD>
									<TD align="center" width="10%" id=><div
											id="rowquantum_server">
											<input name="quantum_servertext" id="quantum_servertext"
												type="text" size="12">
										</div></TD>
								</TR>
							</TABLE>
						</div>




					</div>

					<table border="0" width="50%">
						<tbody>

							<tr>
								<td>&nbsp;</td>
								<td>&nbsp;</td>
							</tr>
							<tr>
								<td><input class="backButton" value="BACK" type="button"></td>
								<td align="right"><input class="nextButton" id="3"
									value="NEXT" type="button"></td>
							</tr>
						</tbody>
					</table>



				</div>
			</form>


		</div>	
		<div class="ui-tabs-panel ui-widget-content ui-corner-bottom"   id="tabs-6">
			<h2>Node Role Mapping</h2>
			<form name="form4" id="form4">
	
			<div id="deploymentSelection" class="deploymentSelection">
				<table border="0" width="70%">
					<tbody>
						<tr>
							<td width="20%"><label> Deployment Selection: </label></td>
							<td><select name="deploymentSelectionSelect" id="deploymentSelectionSelect">
									<option value="all">All In One</option>
									<option value="single">Singole-Controller</option>
									<option value="multi">Multi-Nodes</option>
							</select></td>
						</tr>
					</tbody>
				</table>
			</div>
				<p></p>
				<div id="NodeMapping" class="NodeMapping">
					<table border="1"  id="NodeMappingTable" class="NodeMappingTable">
					</TABLE>
				</div>



				<table border="0" width="50%">
					<tbody>

						<tr>
							<td>&nbsp;</td>
							<td>&nbsp;</td>
						</tr>
						<tr>
							<td><input class="backButton" value="BACK" type="button"></td>
							<td align="right"><input class="nextButton" id="4"
								value="NEXT" type="button"></td>
						</tr>
					</tbody>
				</table>

				<p></p>

			</form>		
		</div>
		
		<div class="ui-tabs-panel ui-widget-content ui-corner-bottom"  align="center" id="tabs-7">
			<h2>Deployment</h2>
			<form name="form5" id="form5">
				<p></p>
				<table border="0" width="60%">
					<tbody>
						<tr>
							<th scope="col" width="50%"><input id="startDeployment"
								value="Start Deployment" type="button"></th>
							<th scope="col" width="50%"><input class="photoButton"
								value="Reset Cluster" type="button"></th>
						</tr>
						<tr align="center">
							<td colspan="2"><textarea id="result" rows="21" cols="90"></textarea></td>
							<!--<div class="include-file">this is test</div>-->
						</tr>
					</tbody>
				</table>
				<p></p>
				<p></p>		
			</form>			
		</div>
		</div>
		
</body>


</html>