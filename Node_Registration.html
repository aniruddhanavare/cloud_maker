<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>SCI DevOps Portal - Node Registration</title>

<link rel="stylesheet" href="css/jquery-ui.css">
<link rel="stylesheet" href="css/tab_style.css">
<link rel="stylesheet" href="css/bootstrap.css">
<link rel="stylesheet" href="css/bootstrap-editable.css">

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script src="/_utils/script/json2.js"></script>
    <script src="/_utils/script/sha1.js"></script>
    <script src="/_utils/script/jquery.js?1.4.2"></script>
    <script src="/_utils/script/jquery.couch.js?0.11.0"></script>
    <script src="/_utils/script/jquery.dialog.js?0.11.0"></script>	
	<script src="js/common.js"></script>	
<script>


function deleteNode(id,revID) {
 
var jsonPayload = {};
jsonPayload['_id']=id;
jsonPayload['_rev']=revID;
 
$.couch.db("devops").removeDoc(jsonPayload, {
     success: function(data) {
         if(data.ok)
		{
			alert("Node Deleted");
			location.reload(true);
		}
    },
    error: function(status) {
        alert(status);
    }
});

    }

 
$.couch.db("devops").view("node-query/all", {
    success: function(data) {
	
		var nodes = data.rows;
		for(i=0;i<nodes.length;i++)
		{
			var jsonObject = nodes[i];
			var jsonValue = jsonObject.value;
			
			//alert(jsonValue._id);
			$("#baseTable > tbody").append("<tr align='center'><td>"+(jsonObject.key)+"</td><td>"+(jsonValue.install_nic)+"</td><td>"+(jsonValue.install_ip)+"</td><td>"+(jsonValue.install_gw)+"</td><td>"+(jsonValue.install_nmask)+"</td><td><a id=\"aaaa\" href=\"javascript:deleteNode('"+(jsonValue._id)+"','"+(jsonValue._rev)+"');\">Delete</a></td></tr>");
		}
	   
    },
    error: function(status) {
        alert(status);
    },
    reduce: false
});


    </script> 

</head>


<body>
	<div
		class="ui-tabs ui-widget ui-widget-content">
		<div 
		
			class="ui-tabs-panel ui-widget-content ui-corner-bottom "
			 align="center">
			
			<h2>Node Registration</h2>
				<table border="0" width="70%">
						<tr id="baseTableHeader">
							<th scope="col" width="50%"><a href="Create_Node.html">Create New Node</a></th>
							<th scope="col" width="50%"><a href="sci_portal.html">Home</a></th>
						</tr>					
				</table>			
			
			<p></p>
			<form name="form2" id="form2">
				<table id="baseTable" border="1" width="70%">
						<tr id="baseTableHeader">
							<th scope="col" width="20%">Node Name</th>
							<th scope="col" width="10%">Install NIC</th>
							<th scope="col" width="20%">Install IP</th>
							<th scope="col" width="20%">Install Gateway</th>
							<th scope="col" width="20%">Net Mask</th>
							<th scope="col" width="5%">Delete</th>
						</tr>					
				</table>
			</form>

		</div>
		</div>
</body>
</html>
